(function(e){function t(t){for(var r,a,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},c={app:0},o=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-1ef49afb":"9c423a15","chunk-2d0a4f44":"9e3ac45f","chunk-2d0ac1df":"ee0f001c","chunk-2d0ae90a":"b9c142d0","chunk-2d0be6fd":"5c986725","chunk-2d207d33":"8014593d","chunk-2d22d0b3":"f46a5574","chunk-5e3f3af2":"018de694","chunk-f1a78462":"c5bddd93"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-1ef49afb":1,"chunk-5e3f3af2":1,"chunk-f1a78462":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-1ef49afb":"7db62a4e","chunk-2d0a4f44":"31d6cfe0","chunk-2d0ac1df":"31d6cfe0","chunk-2d0ae90a":"31d6cfe0","chunk-2d0be6fd":"31d6cfe0","chunk-2d207d33":"31d6cfe0","chunk-2d22d0b3":"31d6cfe0","chunk-5e3f3af2":"844147c6","chunk-f1a78462":"ea90f7db"}[e]+".css",c=u.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===c))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){s=d[i],l=s.getAttribute("data-href");if(l===r||l===c)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],p.parentNode.removeChild(p),n(o)},p.href=c;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}c[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/vue3-shop-site/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var p=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7"),n("ac1f"),n("25f0"),n("5319");function r(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"₽",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,n)+n+t:""};return{currencyFilter:e}}},"2d61":function(e,t,n){"use strict";var r=n("f2bf");function a(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("InputNumber");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.value=e}),showButtons:"",buttonLayout:"horizontal",decrementButtonClass:"p-button-danger",incrementButtonClass:"p-button-success",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",min:n.min,max:99},null,8,["modelValue","min"])}n("a9e3");var c={name:"AppCount",props:{min:{type:Number,default:0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(e.modelValue);return Object(r["watch"])(a,(function(e){n("update:modelValue",e)})),{value:a}}};c.render=a;t["a"]=c},"4c4b":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("96cf");var r=n("1da1"),a=n("5530"),c=n("f2bf"),o=n("5502"),i=n("6c02");function u(){var e=Object(o["b"])(),t=Object(i["d"])(),n=Object(i["c"])(),u=Object(c["computed"])((function(){return e.state.items})),s=Object(c["computed"])((function(){return u.value.items})),l=Object(c["computed"])((function(){return u.value.isLoading})),d=Object(c["computed"])((function(){return u.value.filters})),p=Object(c["computed"])((function(){return u.value.filtersStatic})),f=Object(c["computed"])((function(){return u.value.totalItems})),m=function(){e.dispatch("items/fetchItems")},b=function(n){e.dispatch("items/setFilters",n),t.push({name:"CatalogPage",query:Object(a["a"])({},d.value)})},g=function(e,t){1!==d.value._page&&b({key:"_page",value:1,isNotFetch:!0}),b({key:e,value:t}),"_sort"===e&&null===t&&b({key:"_order",value:"asc",isNotFetch:!0})},h=Object(c["computed"])((function(){return d.value.category||d.value.type||d.value._sort})),O=function(){e.dispatch("items/clearFilters"),t.push({name:"CatalogPage"})},j=function(){n.query._limit&&n.query._page&&e.commit("items/setFilters",Object(a["a"])(Object(a["a"])({},n.query),{},{_limit:+n.query._limit,_page:+n.query._page}))},v=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==p.value.categories.length){t.next=3;break}return t.next=3,e.dispatch("items/fetchFiltersStatic");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{fetchItems:m,catalogItems:s,isLoading:l,setFilters:b,filters:d,totalItems:f,changeFiltersHandler:g,clearFilters:O,isVisibleClearBtn:h,checkRoute:j,fetchFiltersStatic:v,filtersStatic:p}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("f2bf"),a=n("25a0");function c(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("Toast"),u=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(a.layout),null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i),Object(r["createVNode"])(u)]})),_:1})}var o=n("6c02"),i=n("66e8"),u=(n("b0c0"),{class:"main-layout"}),s={class:"container"},l=Object(r["createVNode"])("h2",{class:"p-t-bold p-m-0"},"V3",-1),d=Object(r["createVNode"])("i",{class:"pi pi-shopping-cart",style:{"font-size":"2em"}},null,-1),p={class:"p-badge p-badge-primary"},f=Object(r["createTextVNode"])(" Логин "),m={class:"p-pt-4 p-pb-4"},b={class:"container"},g={class:"container p-d-flex p-jc-between"},h=Object(r["createVNode"])("p",null,"Andrew Leykin",-1);function O(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("router-link"),O=Object(r["resolveComponent"])("BButton"),j=Object(r["resolveComponent"])("MenuItem"),v=Object(r["resolveComponent"])("AppLink"),k=Object(r["resolveComponent"])("Menubar");return Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])("header",null,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])(k,{model:a.menuItems},{start:Object(r["withCtx"])((function(){return[l]})),end:Object(r["withCtx"])((function(){return[a.cartsLength>0?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,to:{name:"CartPage"},class:"cart-link p-overlay-badge p-mr-2"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.currencyFilter(a.cartsTotalSum))+" ",1),d,Object(r["createVNode"])("span",p,Object(r["toDisplayString"])(a.cartsLength),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),a.isAuth?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(O,{label:a.user.name,icon:"pi pi-angle-down",iconPos:"right",class:"p-button-link","aria-haspopup":"true","aria-controls":"profile_menu",onClick:a.toggleProfileMenu},null,8,["label","onClick"]),Object(r["createVNode"])(j,{id:"profile_menu",ref:"profileMenu",model:a.profileMenuItems,popup:!0},null,8,["model"])],64)):(Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:2,to:{name:"AuthPage"}},{default:Object(r["withCtx"])((function(){return[f]})),_:1}))]})),_:1},8,["model"])])]),Object(r["createVNode"])("main",m,[Object(r["createVNode"])("div",b,[Object(r["renderSlot"])(e.$slots,"default")])]),Object(r["createVNode"])("footer",null,[Object(r["createVNode"])("div",g,[Object(r["createVNode"])("p",null,"Copyright "+Object(r["toDisplayString"])(a.year),1),h])])])}var j=n("2148"),v=n("cd6d"),k=n("ce46"),y={name:"MainLayout",components:{AppLink:k["a"]},setup:function(){var e=Object(i["a"])(),t=e.user,n=e.isAuth,a=e.apiLogout,c=Object(j["a"])(),o=c.currencyFilter,u=Object(v["a"])(),s=u.cartsLength,l=u.cartsTotalSum,d=(new Date).getFullYear(),p=Object(r["computed"])((function(){return[{label:"Каталог",to:{name:"CatalogPage"}},{label:"О нас",to:{name:"AboutPage"}},{label:"История заказов",to:{name:"OrderListPage"},visible:n.value}]})),f=Object(r["computed"])((function(){return[{label:"Профиль",to:"/profile/".concat(t.value.id),icon:"pi pi-user"},{label:"Выйти",command:a,icon:"pi pi-power-off"}]})),m=Object(r["ref"])(null),b=function(e){m.value.toggle(e)};return{year:d,menuItems:p,profileMenuItems:f,toggleProfileMenu:b,profileMenu:m,currencyFilter:o,user:t,isAuth:n,cartsLength:s,cartsTotalSum:l}}};n("fb88");y.render=O;var C=y,w={class:"empty-layout"};function B(e,t,n,a,c,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",w,[Object(r["renderSlot"])(e.$slots,"default")])}var I={name:"EmptyLayout"};n("c4f7");I.render=B;var V=I,S=n("5502"),L={name:"App",components:{MainLayout:C,EmptyLayout:V},setup:function(){var e=Object(i["a"])(),t=e.getUser,n=Object(S["b"])(),a=Object(o["c"])(),c=Object(r["computed"])((function(){return"".concat(a.meta.layout||"main","-layout")})),u=Object(r["computed"])((function(){return n.state}));return t(),{layout:c,store:u}}};n("6425");L.render=c;var N=L,P=(n("d3b7"),{class:"catalog"}),x={class:"p-grid"},_={class:"p-col-3"},F={class:"p-col-8"},T={key:1,class:"p-grid"};function R(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("CatalogFilters"),u=Object(r["resolveComponent"])("CatalogTop"),s=Object(r["resolveComponent"])("ProgressSpinner"),l=Object(r["resolveComponent"])("CatalogCard"),d=Object(r["resolveComponent"])("CatalogPaginator");return Object(r["openBlock"])(),Object(r["createBlock"])("div",P,[Object(r["createVNode"])("div",x,[Object(r["createVNode"])("div",_,[Object(r["createVNode"])(i)]),Object(r["createVNode"])("div",F,[Object(r["createVNode"])(u),a.isLoading?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0})):(Object(r["openBlock"])(),Object(r["createBlock"])("div",T,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a.catalogItems,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"p-col-4",key:e.id},[Object(r["createVNode"])(l,{item:e},null,8,["item"])])})),128))])),Object(r["createVNode"])(d)])])])}var A=n("4c4b"),q={class:"catalog-filters"},M=Object(r["createVNode"])("h3",null,"Фильтры",-1),U={class:"p-field"},E={class:"p-field"};function D(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("RadioButton"),u=Object(r["resolveComponent"])("Dropdown"),s=Object(r["resolveComponent"])("BButton");return Object(r["openBlock"])(),Object(r["createBlock"])("div",q,[M,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a.filtersStatic.types,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"p-field-radiobutton",key:e.code},[Object(r["createVNode"])(i,{name:"type",id:e.code,value:e.code,modelValue:a.filters.type,onInput:t[1]||(t[1]=function(e){return a.filtersHandler("type",e.target.value)})},null,8,["id","value","modelValue"]),Object(r["createVNode"])("label",{for:e.code},Object(r["toDisplayString"])(e.name),9,["for"])])})),128)),Object(r["createVNode"])("div",U,[Object(r["createVNode"])(u,{modelValue:a.filters.category,onChange:t[2]||(t[2]=function(e){return a.filtersHandler("category",e.value)}),options:a.filtersStatic.categories,optionLabel:"name",placeholder:"Категория",style:{width:"100%"},showClear:!0,optionValue:"code"},null,8,["modelValue","options"])]),Object(r["createVNode"])("div",E,[Object(r["createVNode"])(u,{modelValue:a.filters._sort,onChange:t[3]||(t[3]=function(e){return a.filtersHandler("_sort",e.value)}),options:a.filtersStatic.sorts,optionLabel:"name",placeholder:"Сортировать",style:{width:"100%"},showClear:!0,optionValue:"code"},null,8,["modelValue","options"])]),a.filters._sort?(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],{key:0},Object(r["renderList"])(a.orders,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"p-field-radiobutton",key:e.code},[Object(r["createVNode"])(i,{name:"_order",id:e.code,value:e.code,modelValue:a.filters._order,onInput:t[4]||(t[4]=function(e){return a.filtersHandler("_order",e.target.value)})},null,8,["id","value","modelValue"]),Object(r["createVNode"])("label",{for:e.code},Object(r["toDisplayString"])(e.name),9,["for"])])})),128)):Object(r["createCommentVNode"])("",!0),a.isVisibleClearBtn?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:1,label:"Сбросить",icon:"pi pi-times",iconPos:"right",class:"p-button-secondary",onClick:a.clearFilters},null,8,["onClick"])):Object(r["createCommentVNode"])("",!0)])}var H={name:"CatalogFilters",setup:function(){var e=Object(A["a"])(),t=e.filters,n=e.changeFiltersHandler,r=e.clearFilters,a=e.isVisibleClearBtn,c=e.fetchFiltersStatic,o=e.filtersStatic;c();var i=[{name:"К большему",code:"asc"},{name:"К меньшему",code:"desc"}];return{filters:t,filtersStatic:o,orders:i,filtersHandler:n,clearFilters:r,isVisibleClearBtn:a}}};H.render=D;var z=H,Q=(n("ac1f"),n("841c"),{class:"p-grid p-ai-center p-jc-between"}),J={class:"p-col-4"},$={class:"p-inputgroup"};function K(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("InputText"),u=Object(r["resolveComponent"])("BButton"),s=Object(r["resolveComponent"])("CatalogPaginator");return Object(r["openBlock"])(),Object(r["createBlock"])("div",Q,[Object(r["createVNode"])("div",J,[Object(r["createVNode"])("form",{onSubmit:t[2]||(t[2]=Object(r["withModifiers"])((function(){return a.onSearch.apply(a,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",$,[Object(r["createVNode"])(i,{placeholder:"Поиск",modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.search=e})},null,8,["modelValue"]),Object(r["createVNode"])(u,{icon:"pi pi-search",class:"p-button-warning",type:"submit"})])],32)]),Object(r["createVNode"])(s,{pageLinkSize:3})])}function Y(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("Paginator");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{rows:a.filters._limit,totalRecords:a.totalItems,pageLinkSize:n.pageLinkSize,rowsPerPageOptions:[10,20],alwaysShow:!1,onPage:t[1]||(t[1]=function(e){return a.onPage(e)}),first:10*a.filters._page-10},null,8,["rows","totalRecords","pageLinkSize","first"])}n("a9e3");var G={name:"CatalogPaginator",props:{pageLinkSize:{type:Number,default:5}},setup:function(){var e=Object(A["a"])(),t=e.setFilters,n=e.filters,r=e.totalItems,a=function(e){t({key:"_limit",value:e.rows,isNotFetch:!0}),t({key:"_page",value:++e.page})};return{onPage:a,filters:n,totalItems:r}}};G.render=Y;var W=G,X={name:"CatalogTop",components:{CatalogPaginator:W},setup:function(){var e=Object(A["a"])(),t=e.changeFiltersHandler,n=Object(r["ref"])(""),a=function(){t("q",n.value)};return{search:n,onSearch:a}}};X.render=K;var Z=X,ee={class:"p-mt-0 p-mb-1"};function te(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("router-link"),u=Object(r["resolveComponent"])("AddCartButton"),s=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{header:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("img",{alt:n.item.name,src:"https://source.unsplash.com/".concat(n.item.image,"/600x300/")},null,8,["alt","src"])]})),content:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("h3",ee,Object(r["toDisplayString"])(a.currencyFilter(n.item.price)),1),Object(r["createVNode"])(i,{to:{name:"ProductPage",params:{id:n.item.id}}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.item.name),1)]})),_:1},8,["to"])]})),footer:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{item:n.item},null,8,["item"])]})),_:1})}var ne=n("82ae"),re={name:"CatalogCard",components:{AddCartButton:ne["a"]},props:{item:{type:Object,required:!0}},setup:function(){var e=Object(j["a"])(),t=e.currencyFilter;return{currencyFilter:t}}};re.render=te;var ae=re,ce={name:"CatalogPage",components:{CatalogFilters:z,CatalogTop:Z,CatalogCard:ae,CatalogPaginator:W},setup:function(){var e=Object(A["a"])(),t=e.fetchItems,n=e.catalogItems,r=e.isLoading,a=e.checkRoute;return a(),t(),{catalogItems:n,isLoading:r}}};ce.render=R;var oe=ce,ie=[{path:"/",name:"CatalogPage",component:oe,meta:{title:"Магазин фруктов"}},{path:"/about",name:"AboutPage",component:function(){return n.e("chunk-2d207d33").then(n.bind(null,"a1d1"))}},{path:"/auth",name:"AuthPage",meta:{layout:"empty"},component:function(){return n.e("chunk-5e3f3af2").then(n.bind(null,"21f3"))}},{path:"/registartion",name:"RegistartionPage",meta:{layout:"empty"},component:function(){return n.e("chunk-1ef49afb").then(n.bind(null,"a65e"))}},{path:"/product/:id",name:"ProductPage",component:function(){return n.e("chunk-2d0ac1df").then(n.bind(null,"17be"))}},{path:"/profile/:id",name:"ProfilePage",meta:{requiresAuth:!0},component:function(){return n.e("chunk-2d0be6fd").then(n.bind(null,"2ff9"))}},{path:"/cart",name:"CartPage",component:function(){return n.e("chunk-2d22d0b3").then(n.bind(null,"f68e"))}},{path:"/order",name:"OrderPage",meta:{requiresAuth:!0},component:function(){return n.e("chunk-f1a78462").then(n.bind(null,"2ab2"))}},{path:"/order/list",name:"OrderListPage",meta:{requiresAuth:!0},component:function(){return n.e("chunk-2d0ae90a").then(n.bind(null,"0b35"))}},{path:"/order/list/:id",name:"OrderDetailPage",meta:{requiresAuth:!0},component:function(){return n.e("chunk-2d0a4f44").then(n.bind(null,"0949"))}},{path:"/:pathMatch(.*)*",redirect:"/"}],ue=Object(o["a"])({history:Object(o["b"])("/vue3-shop-site/"),routes:ie}),se=ue,le=(n("b64b"),n("96cf"),n("1da1")),de=n("bc3a"),pe=n.n(de),fe=n("a786"),me=(n("7db0"),n("5530")),be={namespaced:!0,state:{items:[],isLoading:!1,filters:{_limit:10,_page:1,category:null,type:null,_sort:null,_order:"asc",q:null},filtersStatic:{categories:[],sorts:[],types:[]},totalItems:40},getters:{getFilterStaticLabel:function(e){return function(t,n){var r=e.filtersStatic[n],a=r.find((function(e){return e.code===t}));return a?a.name:""}}},mutations:{setItems:function(e,t){e.items=t},setIsLoading:function(e,t){e.isLoading=t},setFilters:function(e,t){e.filters=t},setFiltersItem:function(e,t){var n=t.key,r=t.value;e.filters[n]=r},setTotalItems:function(e,t){e.totalItems=t},setFiltersStatic:function(e,t){e.filtersStatic=t}},actions:{fetchItems:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,n("setIsLoading",!0),t.next=4,pe.a.get("/items",{params:Object(me["a"])({},r.filters)}).then((function(e){n("setItems",e.data),n("setTotalItems",r.filters.q?10:r.filters.type||r.filters.category?20:40),n("setIsLoading",!1)})).catch((function(){n("setIsLoading",!1)}));case 4:case"end":return t.stop()}}),t)})))()},fetchFiltersStatic:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,pe.a.get("/filters").then((function(e){n("setFiltersStatic",e.data)}));case 3:case"end":return t.stop()}}),t)})))()},setFilters:function(e,t){var n=e.dispatch,r=e.commit;r("setFiltersItem",t),t&&!t.isNotFetch&&n("fetchItems")},clearFilters:function(e){var t=e.commit,n=e.state,r=e.dispatch;t("setFilters",{_limit:n.filters._limit,_page:1,category:null,type:null,_sort:null,_order:"asc",q:null}),r("fetchItems")}}},ge={namespaced:!0,state:{item:{},isLoading:!1},mutations:{setItem:function(e,t){e.item=t},setIsLoading:function(e,t){e.isLoading=t}},actions:{fetchItem:function(e,t){return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("setIsLoading",!0),n.next=4,pe.a.get("/items/".concat(t)).then((function(e){r("setItem",e.data),r("setIsLoading",!1)})).catch((function(e){r("setIsLoading",!1),se.push({name:"CatalogPage"})}));case 4:case"end":return n.stop()}}),n)})))()}}},he=(n("c740"),n("13d5"),n("a434"),{namespaced:!0,state:{carts:JSON.parse(localStorage.getItem("user-carts"))||[]},getters:{cartItemById:function(e){return function(t){return e.carts.find((function(e){return e.id===t}))}},cartsLength:function(e){return e.carts.reduce((function(e,t){return e+=t.quantity,e}),0)},cartsTotalSum:function(e){return e.carts.reduce((function(e,t){return e+=t.price*t.quantity,e}),0)}},mutations:{addCartItem:function(e,t){e.carts.push(Object(me["a"])(Object(me["a"])({},t),{},{quantity:1}))},removeCartItem:function(e,t){var n=e.carts.findIndex((function(e){return e.id===t}));e.carts.splice(n,1)},setQuantity:function(e,t){var n=t.id,r=t.value,a=e.carts.find((function(e){return e.id===n}));a.quantity=r},clearCart:function(e){e.carts=[]}},actions:{changeCart:function(e,t){var n=e.commit,r=e.state;n(t.type,t.payload),localStorage.setItem("user-carts",JSON.stringify(r.carts))}}}),Oe={namespaced:!0,state:{orders:[],isLoading:!1},mutations:{setOrders:function(e,t){e.orders=t},setIsLoading:function(e,t){e.isLoading=t}},actions:{fetchOrders:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("setIsLoading",!0),t.next=4,pe.a.get("/orders").then((function(e){n("setOrders",e.data),n("setIsLoading",!1)})).catch((function(e){n("setIsLoading",!1)}));case 4:case"end":return t.stop()}}),t)})))()},postOrder:function(e,t){return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.rootState,n.next=3,pe.a.post("/orders",Object(me["a"])(Object(me["a"])({},t),{},{carts:r.cart.carts})).then((function(e){console.log(e)}));case 3:case"end":return n.stop()}}),n)})))()}}},je=Object(S["a"])({state:{user:{}},getters:{isAuth:function(e){return Object.keys(e.user).length>0}},mutations:{setUser:function(e,t){e.user=t}},actions:{apiLogin:function(e,t){return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,pe.a.post("/login",t).then(function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("setUserToken",t.data.accessToken),e.next=3,r("apiUserById",Object(fe["a"])(t.data.accessToken));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw new Error(e.response.data)}));case 3:case"end":return n.stop()}}),n)})))()},apiLogout:function(e){return Object(le["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,n("setUser",{}),localStorage.removeItem("user-token");case 3:case"end":return t.stop()}}),t)})))()},apiRegister:function(e,t){return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,pe.a.post("/register",t).then(function(){var e=Object(le["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("setUserToken",t.data.accessToken),e.next=3,r("apiUserById",Object(fe["a"])(t.data.accessToken));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw new Error(e.response.data)}));case 3:case"end":return n.stop()}}),n)})))()},apiUserById:function(e,t){return Object(le["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,pe.a.get("/users/".concat(t)).then((function(e){r("setUser",e.data)})).catch((function(e){throw new Error(e.response.data)}));case 3:case"end":return n.stop()}}),n)})))()},setUserToken:function(e,t){localStorage.setItem("user-token",t)}},modules:{items:be,item:ge,cart:he,orders:Oe}});pe.a.defaults.headers["content-type"]="application/json",pe.a.defaults.withCredentials=!0,pe.a.defaults.baseURL="http://localhost:3000",pe.a.interceptors.response.use(null,(function(e){return console.error(e),401===e.status&&se.push({name:"CatalogPage"}),Promise.reject(e)})),se.beforeEach((function(e,t,n){if(e.meta.title&&(document.title=e.meta.title),e.meta.requiresAuth)return je.getters.isAuth||localStorage.getItem("user-token")?(n(),!1):(n({name:"AuthPage",query:{redirect:e.fullPath}}),!1);n()}));var ve=n("8459"),ke=n.n(ve),ye=(n("ec12"),n("e1ae"),n("4121"),n("bddf"),n("6549")),Ce=n.n(ye),we=n("a84a"),Be=n.n(we),Ie=n("a0cd"),Ve=n.n(Ie),Se=n("9cbd"),Le=n.n(Se),Ne=n("a7ca"),Pe=n.n(Ne),xe=n("404c"),_e=n.n(xe),Fe=n("03d6"),Te=n.n(Fe),Re=n("7471"),Ae=n.n(Re),qe=n("b1cf"),Me=n.n(qe),Ue=n("43c3"),Ee=n.n(Ue),De=n("0423"),He=n.n(De),ze=n("6060"),Qe=n.n(ze),Je=n("8d04"),$e=n.n(Je),Ke=Object(r["createApp"])(N);Ke.use(ke.a),Ke.component("BButton",Ce.a),Ke.component("InputText",Be.a),Ke.component("Menubar",Ve.a),Ke.component("MenuItem",Le.a),Ke.component("Card",Pe.a),Ke.component("Dropdown",_e.a),Ke.component("RadioButton",Te.a),Ke.component("Paginator",Ae.a),Ke.component("InputNumber",Me.a),Ke.component("InputMask",Ee.a),Ke.component("Rating",He.a),Ke.component("Toast",Qe.a),Ke.component("ProgressSpinner",$e.a),Ke.use(a["a"]).use(je).use(se).mount("#app")},6425:function(e,t,n){"use strict";n("ddb06")},"66e8":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("b0c0"),n("96cf");var r=n("1da1"),a=n("6c02"),c=n("f2bf"),o=n("5502"),i=n("a786"),u=n("89d3");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,t=Object(u["useToast"])(),n=function(n){t.add({severity:"error",summary:"Error",detail:n,life:e})};return{errorToast:n}}function l(){var e=Object(o["b"])(),t=Object(a["d"])(),n=Object(a["c"])(),u=s(),l=u.errorToast,d=Object(c["computed"])((function(){return e.state.user})),p=Object(c["computed"])((function(){return e.getters.isAuth})),f=function(){t.push(n.query.redirect||{name:"ProfilePage",params:{id:d.value.id}})},m=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.type,a=n.payload,t.next=3,e.dispatch(r,a).then((function(){f()})).catch((function(e){l(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.dispatch("apiLogout"),"CatalogPage"!==n.name&&t.push({name:"CatalogPage"})},g=function(){+n.params.id!==d.value.id&&t.push({name:"CatalogPage"})},h=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!localStorage.getItem("user-token")){t.next=3;break}return t.next=3,e.dispatch("apiUserById",Object(i["a"])(localStorage.getItem("user-token")));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{goToProfileLink:f,user:d,isAuth:p,apiAuth:m,apiLogout:b,checkProfilePage:g,getUser:h}}},"82ae":function(e,t,n){"use strict";var r=n("f2bf"),a={class:"p-d-flex"};function c(e,t,n,c,o,i){var u=Object(r["resolveComponent"])("AppCount"),s=Object(r["resolveComponent"])("BButton");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[c.cartItem?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,modelValue:c.count,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.count=e})},null,8,["modelValue"])):(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:1,icon:"pi pi-shopping-cart",class:"p-button-success",style:{flex:"none"},onClick:c.addToCartHandler},null,8,["onClick"]))])}var o=n("5502"),i=n("2d61"),u=n("cd6d"),s={name:"AddCartButton",components:{AppCount:i["a"]},props:{item:{type:Object,required:!0}},setup:function(e){var t=Object(u["a"])(),n=t.addToCart,a=t.changeQuantity,c=Object(o["b"])(),i=Object(r["ref"])(1),s=Object(r["ref"])(e.item),l=function(){i.value=1,n(s.value)},d=Object(r["computed"])((function(){return c.getters["cart/cartItemById"](s.value.id)}));d.value&&(i.value=d.value.quantity);var p=function(e){a({id:d.value.id,value:e})};return Object(r["watch"])(i,p),{count:i,productItem:s,addToCartHandler:l,cartItem:d,changeQuantity:a}}};s.render=c;t["a"]=s},"90f8":function(e,t,n){},a786:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4c53");var r=n("1232");function a(e){return Object(r["a"])(e).sub}},c4f7:function(e,t,n){"use strict";n("ec36")},cd6d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("f2bf"),a=n("5502");function c(){var e=Object(a["b"])(),t=Object(r["computed"])((function(){return e.state.cart.carts})),n=Object(r["computed"])((function(){return e.getters["cart/cartsLength"]})),c=Object(r["computed"])((function(){return e.getters["cart/cartsTotalSum"]})),o=function(e){l({type:"addCartItem",payload:e})},i=function(e){var t=e.id,n=e.value;n?l({type:"setQuantity",payload:{id:t,value:n}}):setTimeout((function(){u(t)}),100)},u=function(e){l({type:"removeCartItem",payload:e})},s=function(){l({type:"clearCart"})},l=function(t){e.dispatch("cart/changeCart",t)};return{addToCart:o,carts:t,changeQuantity:i,cartsLength:n,cartsTotalSum:c,clearCart:s,removeCartItem:u}}},ce46:function(e,t,n){"use strict";var r=n("f2bf");function a(e,t,n,a,c,o){var i=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{class:"p-button p-component p-button-link ".concat(n.classes),to:n.to},{default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","to"])}var c={name:"AppLink",props:{to:{type:[String,Object],default:"/"},classes:{type:String,default:""}}};c.render=a;t["a"]=c},ddb06:function(e,t,n){},ec36:function(e,t,n){},fb88:function(e,t,n){"use strict";n("90f8")}});
//# sourceMappingURL=app.8c4e34f9.js.map